**測試驅動開發學習筆記** 
===
##### 更新時間：2025-09-29 11:00

The FIRST Principles
---

> * Fast  
>> 1.測試要快  
>> 2.小而快、在程序內完成：不須用到資料庫、網路UI動畫  
>> 3.量測速度、找出慢的測試  
>> 4.非規定：如果某個比較慢的測試帶來的價值大於把它變快的成本與風險，則保留他  

> * Isolated/Independent 隔離/獨立  
>> 1.測試之間彼此獨立，與外部環境隔離  
>> 2.沒有共享狀態  
>> 3.沒有順序依賴  
>> 4.使用準備、執行、驗證寫法(Arrange, Act, Assert)  

> * Repeatable 可重複性  
>> 1.結果必須具決定性  
>> 2.不依賴時間  
>> 3.不依賴隨機資料  
>> 4.每個測是必須自行建立並準備好自己的測試資料  

> * Self-validating 自我驗證  
>> 1.測試只有兩種結過：通過或失敗  
>> 2.測試框架可自動回報結果  

> * Through 完整性
>> 1.可覆蓋所有情境
>> 2.不能只追求「程式碼覆蓋率」
>> 3.可使用驗收測試、整合測試、單元測試或TDD方法達成完整性目標

The 3 “Laws” of TDD
---
> * 除非是為了讓一個失敗中的單元測試通過，否則不允許撰寫任何產品程式碼  
> * 單元測試只寫到足以失敗為止；編譯失敗也算是測試失敗  
>> 1.寫測試的時候，不要一次把完整邏輯的所有測試細節都寫好。   
>> 2.產品程式碼只需要寫到能「讓測試紅燈（失敗）」就好，可以是「測試 assertion 沒過」，也可以是「程式碼還沒實作，甚至編譯錯誤」。  
> * 產品程式碼只寫到足以讓那個失敗的單元測試通過為止，不能多寫。
>> 1.當有一個測試 fail 了，就去寫剛剛好能讓它變綠燈的程式碼。
>> 2.不要一次把完整邏輯寫完（因為還沒測到）。

>> 重點：用最小步伐驅動程式碼，不能一次寫太多這會導致測試沒有意義。

The Red-Green-Reflect-Refactor Cycle（紅-綠-反思-重構循環）
---
> * 撰寫測試  
> * 先寫測試，執行測試 → **測試失敗（紅燈）**  
> * 撰寫產品程式碼  
> * 執行測試 → **測試通過（綠燈）**  
> * 反思程式碼 (提取共用 例如interface、enum)  
> * 找出可以重構的地方 → **測試仍然要保持通過**  
> * 重構程式碼  
> * 再次執行測試 → **測試通過（綠燈）**  

Green Bar Pattern: Fake it
---
> * 介紹：先「假裝實作」──做一個假的、最簡單的實作，讓目前的測試通過，這種「假實作」只是過渡步驟，最後會逐漸演化為真正的實作  
> * 實作：  
>> 1.先讓紅燈 → 綠燈（哪怕是硬 return）
>> 2.再逐步重構到真實解法
>> 3.永遠保持測試在綠燈狀態
>> 舉例：  

To Be Continue...


